<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html
        xmlns:h="http://xmlns.jcp.org/jsf/html"
        xmlns:p="http://primefaces.org/ui"
        xml:lang="en"
        xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
    <title>Lista de Tarefas</title>
</h:head>
<f:view>
    <h:body>
        <center><h2><h:outputText value="Lista de Tarefas" /></h2></center>

        <h:form id="tarefasForm">
            <p:dataTable id="tabelaTarefa" var="tar" value="#{tarefaMB.listarTodas()}" prependId="false"
                         paginator="true" rows="5" emptyMessage="Não há tarefas cadastrados."
                         rowKey="#{tar.id}" selectionMode="single"
                         selection="#{tarefaMB.tarefa}">
                <p:column>
                    <f:facet name="header">Id</f:facet>
                    <h:outputText value="#{tar.id}" />
                </p:column>
                <p:column>
                    <f:facet name="header">Titulo</f:facet>
                    <h:outputText value="#{tar.titulo}" />
                </p:column>
                <p:column>
                    <f:facet name="header">Descrição</f:facet>
                    <h:outputText value="#{tar.descricao}" />
                </p:column>
                <p:column>
                    <f:facet name="header">Responsavel</f:facet>
                    <h:outputText value="#{tar.responsavel}" />
                </p:column>
                <p:column>
                    <f:facet name="header">Prioridade</f:facet>
                    <h:outputText value="#{tar.prioridade}" />
                </p:column>
                <p:column>
                    <f:facet name="header">Deadline</f:facet>
                    <h:outputText value="#{tar.deadline}" />
                </p:column>
                <p:column>
                    <f:facet name="header">Ações</f:facet>
                    <p:commandButton  value="Update" action="#{tarefaMB.editar(tar.id)}" class="btn btn-primary" />


                    <p:commandButton action="#{tarefaMB.apagar(tar)}" value="Delete" class="btn btn-danger" update=":tarefasForm" />

                    <p:commandButton action="#{tarefaMB.concluir(tar)}"  value="Concluir" class="btn btn-danger" />
                </p:column>
            </p:dataTable>

        </h:form>
        <center>
        <p:commandButton   value="Cadastrar Tarefa"
                           resetValues="true"
                           action="#{tarefaMB.novo()}"
                           class="btn btn-danger"
                            style="margin-top:30px; margin-right:10px;"/>

        <p:commandButton title="Tarefas Concluidas"
                         action="tarefas-concluidas.xhtml?faces-redirect=true"
                         value="Tarefas Concluidas">
        </p:commandButton>

        </center>



    </h:body>
</f:view>
</html>